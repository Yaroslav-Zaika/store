angular.module("store",["ngRoute","ngAnimate","ngSanitize","ui.bootstrap"]).config(["$routeProvider",function(t){t.when("/products",{templateUrl:"template/products.html",controller:"ProductsCtrl"}).when("/product/:id",{templateUrl:"template/product.html",controller:"ProductCtrl"}).otherwise({redirectTo:"/products"})}]),angular.module("store").controller("ProductCtrl",["$scope","$route","$http","ApiFactory","StorageFactory",function(t,r,e,o,n){function a(){var e=parseInt(r.current.params.id,10);if(isNaN(e))t.error=!0;else{var o=n.getProducts(e-1);o&&o.id===e?t.product=o:o===e-1?t.errorProduct=!0:c()}}function c(){var t=o.get("products");e.get(t).then(u,s)}function u(t){n.setProducts(t),a()}function s(r){t.error=!0}a()}]),angular.module("store").controller("ProductsCtrl",["$scope","$http","ApiFactory","StorageFactory",function(t,r,e,o){function n(){var t=e.get("products");r.get(t).then(a,c)}function a(r){t.products=r.data,o.setProducts(r)}function c(r){t.error=!0}t.requestProducts=n}]),angular.module("store").directive("myAuthentication",["$http","StorageFactory","ApiFactory",function(t,r,e){return{restrict:"A",templateUrl:"template/authentication.html",controller:["$scope",function(o){function n(r,e,o){t.post(r,e).then(o,u)}function a(t){t.data.success?(o.disabled=!1,o.authentication=t.data.success,r.setToken(t.data.token)):o.errorRegister=!0}function c(t){t.data.success?(o.disabled=!1,o.authentication=t.data.success,r.setToken(t.data.token)):o.errorLogin=!0}function u(t){o.error=!0}function s(){o.errorLogin=!1,o.errorRegister=!1,o.errorInput=!1}var i;o.register=function(t){s(),t&&t.username&&t.password?(i=e.get("register"),n(i,t,a)):o.errorInput=!0},o.login=function(t){s(),t&&t.username&&t.password?(i=e.get("login"),n(i,t,c)):o.errorInput=!0},o.exit=function(){r.setToken(!1),o.authentication=!1}}]}}]),angular.module("store").directive("myReviews",["$http","$route","StorageFactory","ApiFactory",function(t,r,e,o){return{restrict:"A",templateUrl:"template/reviews.html",controller:["$scope",function(n){function a(){t.get(g).then(c,u)}function c(t){t.data.length?n.reviews=t.data:n.errorReviews=!0}function u(t){n.error=!0}function s(t){t.data.success?(n.reviewAddErr=!1,a()):n.reviewAddErr=!0}function i(t){n.error=!0}var d,p,g=o.get("reviews")+parseInt(r.current.params.id,10);a(),n.rate=0,n.max=5,n.isReadonly=!1,n.hoveringOver=function(t){n.overStar=t},n.ratingStates=[{stateOn:"glyphicon-star",stateOff:"glyphicon-star-empty"}],n.reviewsAdd=function(r,o){n.rateErr=!1,n.textErr=!1,e.getToken()?(n.authErr=!1,r&&o?(n.text="",n.rate=0,p={rate:parseInt(r,10),text:o},d=n.reviews,t.post(g,p,{headers:{Authorization:"Token "+e.getToken()}}).then(s,i)):r?o||(n.textErr=!0):n.rateErr=!0):n.authErr=!0}}]}}]),angular.module("store").factory("ApiFactory",[function(){var t={register:"http://smktesting.herokuapp.com/api/register/",login:"http://smktesting.herokuapp.com/api/login/",products:"http://smktesting.herokuapp.com/api/products/",reviews:"http://smktesting.herokuapp.com/api/reviews/"};return t.get=function(r){return t[r]},{get:t.get}}]),angular.module("store").factory("StorageFactory",["$http",function(t){var r={products:{},token:!1};return r.setProducts=function(t){r.products=t},r.getProducts=function(t){return!(!r.products||!r.products.data)&&(r.products.data[t]||t)},r.setToken=function(t){r.token=t},r.getToken=function(){return r.token},{setProducts:r.setProducts,getProducts:r.getProducts,setToken:r.setToken,getToken:r.getToken}}]);
//# sourceMappingURL=app.min.js.map
