{"version":3,"sources":["app.min.js"],"names":["angular","module","config","$routeProvider","when","templateUrl","controller","otherwise","redirectTo","$scope","$route","$http","ApiFactory","StorageFactory","getProduct","paramID","parseInt","current","params","id","isNaN","error","product","getProducts","errorProduct","requestProducts","url","get","then","successProducts","errorProducts","response","setProducts","products","data","factory","register","login","reviews","property","storage","token","item","setToken","getToken","directive","restrict","requestAuthentication","user","success","post","errorAuthentication","successRegister","disabled","authentication","errorRegister","successLogin","errorLogin","errorDefault","errorInput","username","password","exit","requestReviews","successReviews","errorReviews","length","successAddReviews","reviewAddErr","errorAddReviews","review","rate","max","isReadonly","hoveringOver","value","overStar","ratingStates","stateOn","stateOff","reviewsAdd","text","rateErr","textErr","authErr","headers","Authorization"],"mappings":"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","file":"app.min.js","sourcesContent":["angular.module('store', ['ngRoute', 'ngAnimate', 'ngSanitize', 'ui.bootstrap'])\r\n\t.config(['$routeProvider', function ($routeProvider) {\r\n\t\t$routeProvider\r\n\t\t\t.when('/products', {\r\n\t\t\t\ttemplateUrl: 'template/products.html',\r\n\t\t\t\tcontroller: 'ProductsCtrl'\r\n\t\t\t})\r\n\t\t\t.when('/product/:id', {\r\n\t\t\t\ttemplateUrl: 'template/product.html',\r\n\t\t\t\tcontroller: 'ProductCtrl'\r\n\t\t\t})\r\n\t\t\t.otherwise({\r\n\t\t\t\tredirectTo: '/products'\r\n\t\t\t});\r\n\t}]);\nangular.module('store')\r\n\t.controller('ProductCtrl', ['$scope', '$route', '$http', 'ApiFactory', 'StorageFactory', function ($scope, $route, $http, ApiFactory, StorageFactory) {\r\n\r\n\t\tgetProduct();\r\n\r\n\t\tfunction getProduct() {\r\n\t\t\tvar paramID = parseInt($route.current.params.id, 10);\r\n\t\t\tif (!isNaN(paramID)) {\r\n\t\t\t\tvar product = StorageFactory.getProducts(paramID - 1);\r\n\t\t\t\tif (product && product.id === paramID) {\r\n\t\t\t\t\t$scope.product = product;\r\n\t\t\t\t} else if (product === paramID - 1) {\r\n\t\t\t\t\t$scope.errorProduct = true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\trequestProducts();\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\t$scope.error = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction requestProducts() {\r\n\t\t\tvar url = ApiFactory.get('products');\r\n\t\t\t$http.get(url).then(successProducts, errorProducts);\r\n\t\t};\r\n\r\n\t\tfunction successProducts(response) {\r\n\t\t\tStorageFactory.setProducts(response);\r\n\t\t\tgetProduct();\r\n\t\t};\r\n\r\n\t\tfunction errorProducts(response) {\r\n\t\t\t$scope.error = true;\r\n\t\t}\r\n}]);\nangular.module('store')\r\n\t.controller('ProductsCtrl', ['$scope', '$http', 'ApiFactory', 'StorageFactory', function ($scope, $http, ApiFactory, StorageFactory) {\r\n\t\t$scope.requestProducts = requestProducts;\r\n\r\n\t\tfunction requestProducts() {\r\n\t\t\tvar url = ApiFactory.get('products');\r\n\t\t\t$http.get(url).then(successProducts, errorProducts);\r\n\t\t};\r\n\r\n\t\tfunction successProducts(response) {\r\n\t\t\t$scope.products = response.data;\r\n\t\t\tStorageFactory.setProducts(response);\r\n\t\t};\r\n\r\n\t\tfunction errorProducts(response) {\r\n\t\t\t$scope.error = true;\r\n\t\t};\r\n}]);\nangular.module('store')\r\n\t.factory('ApiFactory',[ function () {\r\n\t\tvar url = {\r\n\t\t\tregister: 'https://smktesting.herokuapp.com/api/register/',\r\n\t\t\tlogin: 'https://smktesting.herokuapp.com/api/login/',\r\n\t\t\tproducts: 'https://smktesting.herokuapp.com/api/products/',\r\n\t\t\treviews: 'https://smktesting.herokuapp.com/api/reviews/'\r\n\t\t};\r\n\r\n\t\turl.get = function (property) {\r\n\t\t\treturn url[property];\r\n\t\t}\r\n\t\treturn {\r\n\t\t\tget: url.get\r\n\t\t}\r\n\t}]);\nangular.module('store')\r\n\t.factory('StorageFactory', ['$http', function ($http) {\r\n\t\tvar storage = {\r\n\t\t\tproducts: {},\r\n\t\t\ttoken: false\r\n\t\t};\r\n\r\n\t\tstorage.setProducts = function (item) {\r\n\t\t\tstorage.products = item;\r\n\t\t};\r\n\r\n\t\tstorage.getProducts = function (id) {\r\n\t\t\tif (storage.products && storage.products.data) {\r\n\t\t\t\treturn storage.products.data[id] || id;\r\n\t\t\t} else {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tstorage.setToken = function (token) {\r\n\t\t\tstorage.token = token;\r\n\t\t};\r\n\t\tstorage.getToken = function () {\r\n\t\t\treturn storage.token;\r\n\t\t};\r\n\r\n\t\treturn {\r\n\t\t\tsetProducts: storage.setProducts,\r\n\t\t\tgetProducts: storage.getProducts,\r\n\t\t\tsetToken: storage.setToken,\r\n\t\t\tgetToken: storage.getToken\r\n\t\t}\r\n\t}]);\nangular.module('store')\r\n\t.directive('myAuthentication', ['$http', 'StorageFactory', 'ApiFactory', function ($http, StorageFactory, ApiFactory) {\r\n\t\treturn {\r\n\t\t\trestrict: 'A',\r\n\t\t\ttemplateUrl: 'template/authentication.html',\r\n\t\t\tcontroller: ['$scope', function ($scope) {\r\n\t\t\t\tvar url;\r\n\r\n\t\t\t\t$scope.register = function (user) {\r\n\t\t\t\t\terrorDefault();\r\n\t\t\t\t\tif (user && user.username && user.password) {\r\n\t\t\t\t\t\turl = ApiFactory.get('register');\r\n\t\t\t\t\t\trequestAuthentication(url, user, successRegister);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t$scope.errorInput = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\t\t\t\t$scope.login = function (user) {\r\n\t\t\t\t\terrorDefault();\r\n\t\t\t\t\tif (user && user.username && user.password) {\r\n\t\t\t\t\t\turl = ApiFactory.get('login');\r\n\t\t\t\t\t\trequestAuthentication(url, user, successLogin);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t$scope.errorInput = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\t\t\t\t$scope.exit = function () {\r\n\t\t\t\t\tStorageFactory.setToken(false);\r\n\t\t\t\t\t$scope.authentication = false;\r\n\t\t\t\t};\r\n\r\n\t\t\t\tfunction requestAuthentication(url, user, success) {\r\n\t\t\t\t\t$http.post(url, user).then(success, errorAuthentication);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction successRegister(response) {\r\n\t\t\t\t\tif (response.data.success) {\r\n\t\t\t\t\t\t$scope.disabled = false;\r\n\t\t\t\t\t\t$scope.authentication = response.data.success;\r\n\t\t\t\t\t\tStorageFactory.setToken(response.data.token);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t$scope.errorRegister = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\t\t\t\tfunction successLogin(response) {\r\n\t\t\t\t\tif (response.data.success) {\r\n\t\t\t\t\t\t$scope.disabled = false;\r\n\t\t\t\t\t\t$scope.authentication = response.data.success;\r\n\t\t\t\t\t\tStorageFactory.setToken(response.data.token);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t$scope.errorLogin = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\t\t\t\tfunction errorAuthentication(response) {\r\n\t\t\t\t\t$scope.error = true;\r\n\t\t\t\t};\r\n\r\n\t\t\t\tfunction errorDefault() {\r\n\t\t\t\t\t$scope.errorLogin = false;\r\n\t\t\t\t\t$scope.errorRegister = false;\r\n\t\t\t\t\t$scope.errorInput = false;\r\n\t\t\t\t}\r\n\t\t\t}]\r\n\t\t}\r\n\t}]);\nangular.module('store')\r\n\t.directive('myReviews', ['$http', '$route', 'StorageFactory', 'ApiFactory', function ($http, $route, StorageFactory, ApiFactory) {\r\n\t\treturn {\r\n\t\t\trestrict: 'A',\r\n\t\t\ttemplateUrl: 'template/reviews.html',\r\n\t\t\tcontroller: ['$scope', function ($scope) {\r\n\t\t\t\tvar data;\r\n\t\t\t\tvar review;\r\n\t\t\t\tvar url = ApiFactory.get('reviews') + parseInt($route.current.params.id, 10);\r\n\t\t\t\t\r\n\t\t\t\trequestReviews();\r\n\r\n\t\t\t\t$scope.rate = 0;\r\n\t\t\t\t$scope.max = 5;\r\n\t\t\t\t$scope.isReadonly = false;\r\n\r\n\t\t\t\t$scope.hoveringOver = function (value) {\r\n\t\t\t\t\t$scope.overStar = value;\r\n\t\t\t\t};\r\n\r\n\t\t\t\t$scope.ratingStates = [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tstateOn: 'glyphicon-star',\r\n\t\t\t\t\t\tstateOff: 'glyphicon-star-empty'\r\n\t\t\t\t\t}\r\n\t\t\t\t];\r\n\r\n\t\t\t\tfunction requestReviews() {\r\n\t\t\t\t\t$http.get(url).then(successReviews, errorReviews);\r\n\t\t\t\t};\r\n\r\n\t\t\t\tfunction successReviews(response) {\r\n\t\t\t\t\tif (response.data.length) {\r\n\t\t\t\t\t\t$scope.reviews = response.data;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t$scope.errorReviews = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\t\t\t\tfunction errorReviews(response) {\r\n\t\t\t\t\t$scope.error = true;\r\n\t\t\t\t};\r\n\r\n\t\t\t\t$scope.reviewsAdd = function (rate, text) {\r\n\t\t\t\t\t$scope.rateErr = false;\r\n\t\t\t\t\t$scope.textErr = false;\r\n\t\t\t\t\tif (StorageFactory.getToken()) {\r\n\t\t\t\t\t\t$scope.authErr = false;\r\n\t\t\t\t\t\tif (rate && text) {\r\n\t\t\t\t\t\t\t$scope.text = '';\r\n\t\t\t\t\t\t\t$scope.rate = 0;\r\n\t\t\t\t\t\t\treview = {\r\n\t\t\t\t\t\t\t\trate: parseInt(rate, 10),\r\n\t\t\t\t\t\t\t\ttext: text\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\tdata = $scope.reviews;\r\n\t\t\t\t\t\t\t$http.post(url, review, {\r\n\t\t\t\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t\t\t\tAuthorization: 'Token ' + StorageFactory.getToken()\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}).then(successAddReviews, errorAddReviews);\r\n\t\t\t\t\t\t} else if (!rate) {\r\n\t\t\t\t\t\t\t$scope.rateErr = true;\r\n\t\t\t\t\t\t} else if (!text) {\r\n\t\t\t\t\t\t\t$scope.textErr = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t$scope.authErr = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\t\t\t\tfunction successAddReviews(response) {\r\n\t\t\t\t\tif (response.data.success) {\r\n\t\t\t\t\t\t$scope.reviewAddErr = false;\r\n\t\t\t\t\t\trequestReviews();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t$scope.reviewAddErr = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\t\t\t\tfunction errorAddReviews(response) {\r\n\t\t\t\t\t$scope.error = true;\r\n\t\t\t\t};\r\n\t\t\t}]\r\n\t\t}\r\n\t}]);"],"sourceRoot":"/source/"}