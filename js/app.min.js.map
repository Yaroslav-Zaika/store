{"version":3,"sources":["app.min.js"],"names":["angular","module","config","$routeProvider","when","templateUrl","controller","otherwise","redirectTo","$scope","$route","$http","ApiFactory","StorageFactory","getProduct","paramID","parseInt","current","params","id","isNaN","error","product","getProducts","errorProduct","requestProducts","url","get","then","successProducts","errorProducts","response","setProducts","products","data","directive","restrict","requestAuthentication","user","success","post","errorAuthentication","successRegister","disabled","authentication","setToken","token","errorRegister","successLogin","errorLogin","errorDefault","errorInput","register","username","password","login","exit","requestReviews","successReviews","errorReviews","length","reviews","successAddReviews","reviewAddErr","errorAddReviews","review","rate","max","isReadonly","hoveringOver","value","overStar","ratingStates","stateOn","stateOff","reviewsAdd","text","rateErr","textErr","getToken","authErr","headers","Authorization","factory","property","storage","item"],"mappings":"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","file":"app.min.js","sourcesContent":["angular.module('store', ['ngRoute', 'ngAnimate', 'ngSanitize', 'ui.bootstrap'])\r\n\t.config(['$routeProvider', function ($routeProvider) {\r\n\t\t$routeProvider\r\n\t\t\t.when('/products', {\r\n\t\t\t\ttemplateUrl: 'template/products.html',\r\n\t\t\t\tcontroller: 'ProductsCtrl'\r\n\t\t\t})\r\n\t\t\t.when('/product/:id', {\r\n\t\t\t\ttemplateUrl: 'template/product.html',\r\n\t\t\t\tcontroller: 'ProductCtrl'\r\n\t\t\t})\r\n\t\t\t.otherwise({\r\n\t\t\t\tredirectTo: '/products'\r\n\t\t\t});\r\n\t}]);\nangular.module('store')\r\n\t.controller('ProductCtrl', ['$scope', '$route', '$http', 'ApiFactory', 'StorageFactory', function ($scope, $route, $http, ApiFactory, StorageFactory) {\r\n\r\n\t\tgetProduct();\r\n\r\n\t\tfunction getProduct() {\r\n\t\t\tvar paramID = parseInt($route.current.params.id, 10);\r\n\t\t\tif (!isNaN(paramID)) {\r\n\t\t\t\tvar product = StorageFactory.getProducts(paramID - 1);\r\n\t\t\t\tif (product && product.id === paramID) {\r\n\t\t\t\t\t$scope.product = product;\r\n\t\t\t\t} else if (product === paramID - 1) {\r\n\t\t\t\t\t$scope.errorProduct = true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\trequestProducts();\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\t$scope.error = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction requestProducts() {\r\n\t\t\tvar url = ApiFactory.get('products');\r\n\t\t\t$http.get(url).then(successProducts, errorProducts);\r\n\t\t};\r\n\r\n\t\tfunction successProducts(response) {\r\n\t\t\tStorageFactory.setProducts(response);\r\n\t\t\tgetProduct();\r\n\t\t};\r\n\r\n\t\tfunction errorProducts(response) {\r\n\t\t\t$scope.error = true;\r\n\t\t}\r\n}]);\nangular.module('store')\r\n\t.controller('ProductsCtrl', ['$scope', '$http', 'ApiFactory', 'StorageFactory', function ($scope, $http, ApiFactory, StorageFactory) {\r\n\t\t$scope.requestProducts = requestProducts;\r\n\r\n\t\tfunction requestProducts() {\r\n\t\t\tvar url = ApiFactory.get('products');\r\n\t\t\t$http.get(url).then(successProducts, errorProducts);\r\n\t\t};\r\n\r\n\t\tfunction successProducts(response) {\r\n\t\t\t$scope.products = response.data;\r\n\t\t\tStorageFactory.setProducts(response);\r\n\t\t};\r\n\r\n\t\tfunction errorProducts(response) {\r\n\t\t\t$scope.error = true;\r\n\t\t};\r\n}]);\nangular.module('store')\r\n\t.directive('myAuthentication', ['$http', 'StorageFactory', 'ApiFactory', function ($http, StorageFactory, ApiFactory) {\r\n\t\treturn {\r\n\t\t\trestrict: 'A',\r\n\t\t\ttemplateUrl: 'template/authentication.html',\r\n\t\t\tcontroller: ['$scope', function ($scope) {\r\n\t\t\t\tvar url;\r\n\r\n\t\t\t\t$scope.register = function (user) {\r\n\t\t\t\t\terrorDefault();\r\n\t\t\t\t\tif (user && user.username && user.password) {\r\n\t\t\t\t\t\turl = ApiFactory.get('register');\r\n\t\t\t\t\t\trequestAuthentication(url, user, successRegister);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t$scope.errorInput = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\t\t\t\t$scope.login = function (user) {\r\n\t\t\t\t\terrorDefault();\r\n\t\t\t\t\tif (user && user.username && user.password) {\r\n\t\t\t\t\t\turl = ApiFactory.get('login');\r\n\t\t\t\t\t\trequestAuthentication(url, user, successLogin);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t$scope.errorInput = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\t\t\t\t$scope.exit = function () {\r\n\t\t\t\t\tStorageFactory.setToken(false);\r\n\t\t\t\t\t$scope.authentication = false;\r\n\t\t\t\t};\r\n\r\n\t\t\t\tfunction requestAuthentication(url, user, success) {\r\n\t\t\t\t\t$http.post(url, user).then(success, errorAuthentication);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction successRegister(response) {\r\n\t\t\t\t\tif (response.data.success) {\r\n\t\t\t\t\t\t$scope.disabled = false;\r\n\t\t\t\t\t\t$scope.authentication = response.data.success;\r\n\t\t\t\t\t\tStorageFactory.setToken(response.data.token);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t$scope.errorRegister = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\t\t\t\tfunction successLogin(response) {\r\n\t\t\t\t\tif (response.data.success) {\r\n\t\t\t\t\t\t$scope.disabled = false;\r\n\t\t\t\t\t\t$scope.authentication = response.data.success;\r\n\t\t\t\t\t\tStorageFactory.setToken(response.data.token);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t$scope.errorLogin = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\t\t\t\tfunction errorAuthentication(response) {\r\n\t\t\t\t\t$scope.error = true;\r\n\t\t\t\t};\r\n\r\n\t\t\t\tfunction errorDefault() {\r\n\t\t\t\t\t$scope.errorLogin = false;\r\n\t\t\t\t\t$scope.errorRegister = false;\r\n\t\t\t\t\t$scope.errorInput = false;\r\n\t\t\t\t}\r\n\t\t\t}]\r\n\t\t}\r\n\t}]);\nangular.module('store')\r\n\t.directive('myReviews', ['$http', '$route', 'StorageFactory', 'ApiFactory', function ($http, $route, StorageFactory, ApiFactory) {\r\n\t\treturn {\r\n\t\t\trestrict: 'A',\r\n\t\t\ttemplateUrl: 'template/reviews.html',\r\n\t\t\tcontroller: ['$scope', function ($scope) {\r\n\t\t\t\tvar data;\r\n\t\t\t\tvar review;\r\n\t\t\t\tvar url = ApiFactory.get('reviews') + parseInt($route.current.params.id, 10);\r\n\t\t\t\t\r\n\t\t\t\trequestReviews();\r\n\r\n\t\t\t\t$scope.rate = 0;\r\n\t\t\t\t$scope.max = 5;\r\n\t\t\t\t$scope.isReadonly = false;\r\n\r\n\t\t\t\t$scope.hoveringOver = function (value) {\r\n\t\t\t\t\t$scope.overStar = value;\r\n\t\t\t\t};\r\n\r\n\t\t\t\t$scope.ratingStates = [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tstateOn: 'glyphicon-star',\r\n\t\t\t\t\t\tstateOff: 'glyphicon-star-empty'\r\n\t\t\t\t\t}\r\n\t\t\t\t];\r\n\r\n\t\t\t\tfunction requestReviews() {\r\n\t\t\t\t\t$http.get(url).then(successReviews, errorReviews);\r\n\t\t\t\t};\r\n\r\n\t\t\t\tfunction successReviews(response) {\r\n\t\t\t\t\tif (response.data.length) {\r\n\t\t\t\t\t\t$scope.reviews = response.data;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t$scope.errorReviews = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\t\t\t\tfunction errorReviews(response) {\r\n\t\t\t\t\t$scope.error = true;\r\n\t\t\t\t};\r\n\r\n\t\t\t\t$scope.reviewsAdd = function (rate, text) {\r\n\t\t\t\t\t$scope.rateErr = false;\r\n\t\t\t\t\t$scope.textErr = false;\r\n\t\t\t\t\tif (StorageFactory.getToken()) {\r\n\t\t\t\t\t\t$scope.authErr = false;\r\n\t\t\t\t\t\tif (rate && text) {\r\n\t\t\t\t\t\t\t$scope.text = '';\r\n\t\t\t\t\t\t\t$scope.rate = 0;\r\n\t\t\t\t\t\t\treview = {\r\n\t\t\t\t\t\t\t\trate: parseInt(rate, 10),\r\n\t\t\t\t\t\t\t\ttext: text\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\tdata = $scope.reviews;\r\n\t\t\t\t\t\t\t$http.post(url, review, {\r\n\t\t\t\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t\t\t\tAuthorization: 'Token ' + StorageFactory.getToken()\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}).then(successAddReviews, errorAddReviews);\r\n\t\t\t\t\t\t} else if (!rate) {\r\n\t\t\t\t\t\t\t$scope.rateErr = true;\r\n\t\t\t\t\t\t} else if (!text) {\r\n\t\t\t\t\t\t\t$scope.textErr = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t$scope.authErr = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\t\t\t\tfunction successAddReviews(response) {\r\n\t\t\t\t\tif (response.data.success) {\r\n\t\t\t\t\t\t$scope.reviewAddErr = false;\r\n\t\t\t\t\t\trequestReviews();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t$scope.reviewAddErr = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\t\t\t\tfunction errorAddReviews(response) {\r\n\t\t\t\t\t$scope.error = true;\r\n\t\t\t\t};\r\n\t\t\t}]\r\n\t\t}\r\n\t}]);\nangular.module('store')\r\n\t.factory('ApiFactory',[ function () {\r\n\t\tvar url = {\r\n\t\t\tregister: 'http://smktesting.herokuapp.com/api/register/',\r\n\t\t\tlogin: 'http://smktesting.herokuapp.com/api/login/',\r\n\t\t\tproducts: 'http://smktesting.herokuapp.com/api/products/',\r\n\t\t\treviews: 'http://smktesting.herokuapp.com/api/reviews/'\r\n\t\t};\r\n\r\n\t\turl.get = function (property) {\r\n\t\t\treturn url[property];\r\n\t\t}\r\n\t\treturn {\r\n\t\t\tget: url.get\r\n\t\t}\r\n\t}]);\nangular.module('store')\r\n\t.factory('StorageFactory', ['$http', function ($http) {\r\n\t\tvar storage = {\r\n\t\t\tproducts: {},\r\n\t\t\ttoken: false\r\n\t\t};\r\n\r\n\t\tstorage.setProducts = function (item) {\r\n\t\t\tstorage.products = item;\r\n\t\t};\r\n\r\n\t\tstorage.getProducts = function (id) {\r\n\t\t\tif (storage.products && storage.products.data) {\r\n\t\t\t\treturn storage.products.data[id] || id;\r\n\t\t\t} else {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tstorage.setToken = function (token) {\r\n\t\t\tstorage.token = token;\r\n\t\t};\r\n\t\tstorage.getToken = function () {\r\n\t\t\treturn storage.token;\r\n\t\t};\r\n\r\n\t\treturn {\r\n\t\t\tsetProducts: storage.setProducts,\r\n\t\t\tgetProducts: storage.getProducts,\r\n\t\t\tsetToken: storage.setToken,\r\n\t\t\tgetToken: storage.getToken\r\n\t\t}\r\n\t}]);"],"sourceRoot":"/source/"}